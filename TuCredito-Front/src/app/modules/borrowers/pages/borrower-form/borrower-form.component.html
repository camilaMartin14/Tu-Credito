<div class="page-container">
  <div class="page-header">
    <div class="header-content">
      <h1>{{ isEditMode() ? 'Editar Cliente' : 'Nuevo Cliente' }}</h1>
      <p class="subtitle">Complete la información del prestatario</p>
    </div>
    <button class="btn-secondary" routerLink="/clients">
      <span class="material-icons-round">arrow_back</span>
      Volver
    </button>
  </div>

  <div class="form-card">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      
      <!-- Seccion Datos Personales -->
      <h3 class="section-title">Datos Personales</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Nombre</label>
          <input type="text" formControlName="nombre" placeholder="Ej. Juan">
          <div class="error-msg" *ngIf="form.get('nombre')?.touched && form.get('nombre')?.invalid">
            El nombre es requerido
          </div>
        </div>

        <div class="form-group">
          <label>Apellido</label>
          <input type="text" formControlName="apellido" placeholder="Ej. Pérez">
          <div class="error-msg" *ngIf="form.get('apellido')?.touched && form.get('apellido')?.invalid">
            El apellido es requerido
          </div>
        </div>

        <div class="form-group">
          <label>DNI</label>
          <input type="text" formControlName="dni" placeholder="Sin puntos ni espacios">
          <div class="error-msg" *ngIf="form.get('dni')?.touched && form.get('dni')?.invalid">
            DNI válido es requerido
          </div>
        </div>

        <div class="form-group">
          <label>Teléfono</label>
          <input type="tel" formControlName="telefono" placeholder="Ej. 351...">
          <div class="error-msg" *ngIf="form.get('telefono')?.touched && form.get('telefono')?.invalid">
            Teléfono es requerido
          </div>
        </div>

        <div class="form-group full-width">
          <label>Dirección</label>
          <input type="text" formControlName="domicilio" placeholder="Calle, Número, Barrio...">
          <div class="error-msg" *ngIf="form.get('domicilio')?.touched && form.get('domicilio')?.invalid">
            Dirección es requerida
          </div>
        </div>

        <div class="form-group full-width">
          <label>Correo Electrónico</label>
          <input type="email" formControlName="correo" placeholder="ejemplo@email.com">
          <div class="error-msg" *ngIf="form.get('correo')?.touched && form.get('correo')?.invalid">
            Correo válido es requerido
          </div>
        </div>
      </div>

      <!-- Seccion Garante (Opcional) -->
      <h3 class="section-title" style="margin-top: 2rem;">Datos del Garante (Opcional)</h3>
      <div class="form-grid">
        <div class="form-group">
          <label>Nombre</label>
          <input type="text" formControlName="garanteNombre">
        </div>
        <div class="form-group">
          <label>Apellido</label>
          <input type="text" formControlName="garanteApellido">
        </div>
        <div class="form-group">
          <label>Teléfono</label>
          <input type="tel" formControlName="garanteTelefono">
        </div>
        <div class="form-group">
          <label>DNI</label>
          <input type="text" formControlName="garanteDni">
        </div>
        <div class="form-group">
          <label>Dirección</label>
          <input type="text" formControlName="garanteDomicilio">
        </div>
        <div class="form-group">
          <label>Correo Electrónico</label>
          <input type="email" formControlName="garanteCorreo">
        </div>
      </div>

      <div class="form-actions">
        <div class="alert-error" *ngIf="errorMessage()">{{ errorMessage() }}</div>
        
        <button type="submit" class="btn-primary" [disabled]="isLoading() || form.invalid">
          <span class="material-icons-round" *ngIf="!isLoading()">save</span>
          <span class="material-icons-round spin" *ngIf="isLoading()">refresh</span>
          {{ isLoading() ? 'Guardando...' : 'Guardar Cliente' }}
        </button>
      </div>

    </form>
  </div>
</div>
